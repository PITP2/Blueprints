blueprint:
  name: Thermostat Virtuel
  description: Thermostat régulant un actionneur ON/OFF sur détection de température
  domain: automation
  input:
    capteur_temperature:
      name: Détecteur de température
      description: Ce détecteur servira pour la régulation de température
      selector:
        entity:
          domain: sensor
          device_class: temperature
    target_switch:
      name: Actionneurs
      description: L'actionneur à controler.
      selector:
        target:
          entity:
            domain: switch
trigger:
  - platform: numeric_state
    entity_id: !input capteur_temperature
    above: '21'
  - platform: numeric_state
    entity_id: !input capteur_temperature
    below: '20'
condition: []

action:
  - choose:
      - conditions:
          - condition: numeric_state
            entity_id: !input capteur_temperature
            below: '20'
        sequence:
          - service: switch.turn_on
            data:
              entity_id: !input target_switch
      - conditions:
          - condition: numeric_state
            entity_id: !input capteur_temperature
            below: '21'
        sequence:
          - service: switch.turn_off
            data:
             entity_id: !input target_switch
 
    default:

mode: single
